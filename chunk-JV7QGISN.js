import{b as j,c as L,d as q,e as G,f as $,j as H,k as z,l as U,m as Y}from"./chunk-4DTLLVVD.js";import{a as te}from"./chunk-I44Y4R7J.js";import{h as X,m as J,o as V}from"./chunk-RPMCEQCV.js";import{$ as N,Ca as w,Ea as c,Ja as D,Ka as R,La as K,Ma as M,Na as t,Oa as i,Pa as m,Ta as T,V as A,Xa as x,Ya as E,_,cb as a,eb as p,fb as B,jb as F,lb as I,mb as O,nb as s,ob as u,ua as r}from"./chunk-AXPMFD2G.js";import{d as ee}from"./chunk-5FZOKLP6.js";var h=ee(te());var ne=(g,v)=>({"text-primary bg-primary-subtle":g,"text-light bg-primary":v});function ie(g,v){if(g&1){let b=T();t(0,"button",37),x("click",function(){let e=_(b).$implicit,o=E();return N(o.selectItem(e))}),a(1),i()}if(g&2){let b=v.$implicit,n=E();c("ngClass",O(2,ne,n.selected!=b,n.selected==b)),r(),p(" ",b.nama," ")}}function ae(g,v){if(g&1){let b=T();t(0,"button",38),x("click",function(){_(b);let l=E();return N(l.formDelete())}),m(1,"i",39),i()}}var Q=g=>({"text-muted fst-italic":g}),ce=(()=>{let v=class v{constructor(){this.data=[],this.storageKey="calcKredit",this.controller={input:()=>(0,h.default)("#input"),inputAll:()=>(0,h.default)("#input input,select"),result:()=>(0,h.default)("#result"),form:()=>(0,h.default)("form")}}ngOnInit(){this.loadItem(),this.selected=this.newItem();let n=this.controller.input(),l=this.controller.result().children();n.find("input,select").each((e,o)=>{let d=(0,h.default)(o);d.attr("autocomplete","off");let f=d.prop("tagName").toLowerCase(),S=d.prev("div");f=="select"?d.addClass("form-select"):d.addClass("form-control"),d.on("input",W=>{let C=(0,h.default)(W.target),y=C.val();if(y==null)return;let P=C.attr("inputmode");P=="numeric"&&(y=y.toString().replace(/\./gm,"").replace(/\,/gm,"."));let k=C.attr("name");if(k!=null&&(this.selected[k]=y,P=="numeric")){let Z=Number(y).toLocaleString("id",{useGrouping:!0});d.val(Z)}}),S.addClass("text-capitalize"),d.parents("figure").addClass("mb-3")}),l.addClass("mb-3"),l.find(".fst-italic").addClass("text-muted ps-3"),l.each((e,o)=>{(0,h.default)(o).children().each((d,f)=>{let S=(0,h.default)(f);d==0?S.addClass("fw-bold"):d==1&&S.addClass("")})})}loadItem(){let n=localStorage.getItem(this.storageKey);if(n!=null){let l=JSON.parse(n);this.data=l,this.data.sort(function(e,o){var d=e.nama,f=o.nama;return d<f?-1:d>f?1:0})}}selectItem(n){n==this.selected?this.selected=this.newItem():this.selected=n,this.formSelect(this.selected)}calculate(){let n={getPlafon:0,getDp:0,asetBersih:0,asetBeban:0,totalTenor:0,totalAngsuran:0,totalBunga:0,totalPersen:0,angsPokok:0,angsBunga:0,angsTotal:0},l=this.selected;if(l==null)return n;n.getDp=l.dp,n.getPlafon=l.plafon,l.dp!=null?n.getPlafon=l.aset_nilai-l.dp:l.plafon!=null&&(n.getDp=l.aset_nilai-l.plafon);let e=l.tenor*l.tenorX;isNaN(e)&&(e=0),n.angsPokok=n.getPlafon/e;let o=l.persen/l.persenX*e;return l.angsuran>0?(n.totalAngsuran=l.angsuran*e,n.totalBunga=n.totalAngsuran-n.getPlafon,o=n.totalBunga/n.getPlafon,n.angsTotal=n.totalAngsuran/e,n.angsBunga=n.angsTotal-n.angsPokok):(n.totalBunga=n.getPlafon*(o/100),n.totalAngsuran=n.getPlafon+n.totalBunga,n.angsBunga=n.totalBunga/e,n.angsTotal=n.angsPokok+n.angsBunga),isNaN(o)&&(o=0),n.asetBersih=Number(l.aset_nilai)-(l.dp==null?0:Number(l.dp)),n.asetBeban=Number(l.aset_nilai)+(l.dp==null?0:Number(l.dp)),n.totalTenor=e,n.totalPersen=o,n}newItem(){return{id:-1,tenor:5,tenorX:12,persenX:12}}formSelect(n){let l=this.controller.form();l.find("input,select").val("");for(let e in n){let o=n[e],d=l.find(`[name=${e}]`);d.attr("inputmode")=="numeric"&&(o=Number(o).toLocaleString("id",{useGrouping:!0})),d.val(o)}}formSave(n){if(!n.target.reportValidity())return;let o=this.selected;if(console.log(o),o!=null){if(o.id<0){let d=this.data.map(S=>S.id),f=Math.max(...d);o.id=isNaN(f)||this.data.length==0?1:f+1,this.data.push(JSON.parse(JSON.stringify(o)))}else if(o.id>0){let d=this.data.findIndex(f=>f.id==o.id);this.data[d]=JSON.parse(JSON.stringify(o))}n.preventDefault(),localStorage.setItem(this.storageKey,JSON.stringify(this.data)),this.formReset(!1)}}formReset(n){n&&!confirm("Ulangi form ini?")||setTimeout(()=>{this.loadItem(),this.selected=JSON.parse(JSON.stringify(this.newItem())),this.formSelect(this.selected)},10)}formDelete(){if(!confirm("Hapus data ini?"))return;let l=this.data?.findIndex(e=>e.id==this.selected?.id);l!=null&&this.data.splice(l,1),localStorage.setItem(this.storageKey,JSON.stringify(this.data)),this.formReset(!1),alert("Data berhasil dihapus!")}};v.\u0275fac=function(l){return new(l||v)},v.\u0275cmp=A({type:v,selectors:[["app-calculator-kredit"]],standalone:!0,features:[F],decls:175,vars:98,consts:[["id","input",1,"container"],[1,"text-center"],[1,"text-center","sticky-top","bg-body-tertiary","border","rounded-pill","shadow-sm","p-2","mb-3",3,"hidden"],[3,"submit","reset"],["type","hidden","name","id"],["type","text","name","nama","placeholder","nama kredit","required",""],["type","text","name","aset_nama","placeholder","nama kredit","required",""],[1,"input-group"],[1,"input-group-text"],["type","text","name","aset_nilai","inputmode","numeric","pattern","/\\d|\\.|\\,*/gm","placeholder","jumlah pinjaman"],["type","text","name","dp","inputmode","numeric","pattern","/\\d|\\.|\\,*/gm","placeholder","jumlah pembayaran dimuka",3,"hidden"],[1,"col-form-label","ps-2",3,"hidden"],[1,"text-center","h4"],["type","text","name","plafon","inputmode","numeric","pattern","/\\d|\\.|\\,*/gm","placeholder","jumlah pinjaman",3,"hidden"],["name","tenor","type","number","placeholder","qty"],["name","tenorX",3,"ngModel","ngClass","ngModelChange"],[3,"value"],["value","1"],["value","12"],[3,"hidden"],["name","persen","type","number","placeholder","qty","step","0.01"],["name","persenX",3,"ngClass"],[1,"text-center","h4",3,"hidden"],["name","angsuran","type","text","inputmode","numeric","pattern","/\\d|\\.|\\,*/gm","placeholder","jumlah angsuran.."],["id","result"],[1,"d-flex"],[1,"small","fst-italic","text-muted","fw-medium"],[1,"small","fst-italic"],[1,"d-flex","text-danger"],[1,"fst-italic"],[1,"d-grid"],[1,"d-flex","justify-content-around","mb-3"],["type","button","class","btn btn-lg btn-danger rounded-circle"],["type","reset",1,"btn","btn-lg","btn-secondary","rounded-circle"],[1,"bi","bi-arrow-counterclockwise"],["type","submit",1,"btn","btn-lg","btn-success","rounded-circle"],[1,"bi","bi-floppy-fill"],["type","button",1,"badge","border-1","border-primary","mx-1","rounded-pill",3,"ngClass","click"],["type","button",1,"btn","btn-lg","btn-danger","rounded-circle",3,"click"],[1,"bi","bi-eraser-fill"],["type","button","class","badge border-1 border-primary mx-1 rounded-pill",3,"ngClass"]],template:function(l,e){l&1&&(t(0,"div",0)(1,"h1",1),a(2,"Suku Bunga Tetap"),i(),t(3,"h3",1),a(4,"(Flat Rate)"),i(),t(5,"div",2),K(6,ie,2,5,"button",40,R),i(),t(8,"form",3),x("submit",function(d){return e.formSave(d)})("reset",function(){return e.formReset(!0)}),m(9,"input",4),t(10,"div")(11,"figure")(12,"div"),a(13,"Nama Debitur / Program Kredit"),i(),m(14,"input",5),i(),t(15,"figure")(16,"div"),a(17,"Aset Yang Dijaminkan"),i(),m(18,"input",6),i(),t(19,"figure")(20,"div"),a(21,"Nilai Aset"),i(),t(22,"div",7)(23,"div",8),a(24,"Rp"),i(),m(25,"input",9),i()(),t(26,"figure")(27,"div"),a(28,"Down Payment (DP)"),i(),t(29,"div",7)(30,"div",8),a(31,"Rp"),i(),m(32,"input",10),t(33,"div",11),a(34),s(35,"number"),i()()(),t(36,"figure",12),a(37," Atau "),i(),t(38,"figure")(39,"div"),a(40,"Plafon Kredit"),i(),t(41,"div",7)(42,"div",8),a(43,"Rp"),i(),m(44,"input",13),t(45,"div",11),a(46),s(47,"number"),i()()(),t(48,"figure")(49,"div"),a(50,"Tenor"),i(),t(51,"div",7),m(52,"input",14),t(53,"select",15),x("ngModelChange",function(d){return e.selected.tenorX=d}),t(54,"option",16),a(55,"Periode..."),i(),t(56,"option",17),a(57,"Bulan"),i(),t(58,"option",18),a(59,"Tahun"),i()()()(),t(60,"figure",19)(61,"div"),a(62,"Bunga %"),i(),t(63,"div",7),m(64,"input",20),t(65,"select",21)(66,"option",16),a(67,"Per Periode..."),i(),t(68,"option",17),a(69,"Per Bulan"),i(),t(70,"option",18),a(71,"Per Tahun"),i()()()(),t(72,"figure",22),a(73," Atau "),i(),t(74,"figure",19)(75,"div"),a(76,"Angsuran Bulanan"),i(),t(77,"div",7)(78,"div",8),a(79,"Rp"),i(),m(80,"input",23),i()()(),m(81,"hr"),t(82,"ul",24)(83,"li")(84,"div"),a(85,"Nilai Aset Bersih Setelah DP"),i(),t(86,"div",25)(87,"div"),a(88),s(89,"number"),i()()(),t(90,"li")(91,"div"),a(92,"Selisih Nilai Plafon dan Aset Setelah DP"),i(),t(93,"div",26),a(94," (Risiko kerugian apabila aset disita !) "),i(),t(95,"div",27)(96,"div"),a(97," Dimana Nilai Aset = Nilai Aset Awal + DP "),i(),t(98,"div"),a(99),s(100,"number"),s(101,"number"),t(102,"b"),a(103),s(104,"number"),i()()(),t(105,"div",28)(106,"div"),a(107),s(108,"number"),i(),t(109,"div",29),a(110),s(111,"number"),i()()(),t(112,"li")(113,"div"),a(114,"Lama Angsuran"),i(),t(115,"div"),a(116),s(117,"number"),s(118,"number"),i()(),t(119,"li")(120,"div"),a(121,"Ketahanan"),i(),t(122,"div"),a(123),s(124,"number"),s(125,"number"),i()(),t(126,"li")(127,"div"),a(128,"Angsuran Bulanan"),i(),t(129,"div",25)(130,"div"),a(131),s(132,"number"),i(),t(133,"div",29),a(134),s(135,"number"),i()()(),t(136,"li")(137,"div"),a(138,"Angsuran Harian"),i(),t(139,"div",25)(140,"div"),a(141),s(142,"number"),i()()(),t(143,"li")(144,"div"),a(145,"Total Angsuran"),i(),t(146,"div",25)(147,"div"),a(148),s(149,"number"),i(),t(150,"div",29),a(151),s(152,"number"),i()()(),t(153,"li")(154,"div"),a(155,"Total Bunga"),i(),t(156,"div",25)(157,"div"),a(158),s(159,"number"),i(),t(160,"div",30)(161,"div",29),a(162),s(163,"number"),i(),t(164,"div",29),a(165),s(166,"number"),i()()()()(),m(167,"br")(168,"hr"),t(169,"div",31),w(170,ae,2,0,"button",32),t(171,"button",33),m(172,"i",34),i(),t(173,"button",35),m(174,"i",36),i()()()()),l&2&&(r(5),c("hidden",e.data.length==0),r(),M(e.data),r(26),c("hidden",(e.selected==null?null:e.selected.plafon)!=null),r(),c("hidden",(e.selected==null?null:e.selected.plafon)==null),r(),p(" ",u(35,34,e.calculate().getDp,"0.0-2")," "),r(10),c("hidden",(e.selected==null?null:e.selected.dp)!=null),r(),c("hidden",(e.selected==null?null:e.selected.dp)==null),r(),p(" ",u(47,37,e.calculate().getPlafon,"0.0-2")," "),r(7),c("ngModel",e.selected.tenorX)("ngClass",I(94,Q,e.selected.tenorX==null)),r(),c("value",void 0),r(6),c("hidden",(e.selected==null?null:e.selected.angsuran)!=null),r(5),c("ngClass",I(96,Q,e.selected.persenX==null)),r(),c("value",void 0),r(6),c("hidden",(e.selected==null?null:e.selected.angsuran)!=null||(e.selected==null?null:e.selected.persen)!=null),r(2),c("hidden",(e.selected==null?null:e.selected.persen)!=null),r(14),p("Rp ",u(89,40,e.calculate().asetBersih,"1.0"),""),r(11),B(" = Rp ",u(100,43,e.selected.aset_nilai,"0.0-2")," + Rp ",u(101,46,e.calculate().getDp,"0.0-2")," "),r(4),p(" = Rp ",u(104,49,e.calculate().asetBeban,"0.0-2")," "),r(4),p("Rp ",u(108,52,e.calculate().getPlafon-e.calculate().asetBeban,"1.0"),""),r(3),p(" (",u(111,55,e.calculate().getPlafon/e.calculate().asetBeban/e.calculate().totalTenor*100,"1.2-2"),"%) "),r(6),B(" ",u(117,58,e.calculate().totalTenor/12,"1.2")," Tahun (",u(118,61,e.calculate().totalTenor,"1.0")," Bulan) "),r(7),B(" ",u(124,64,e.calculate().getPlafon/e.calculate().angsTotal/12,"1.0-2")," Tahun (",u(125,67,e.calculate().getPlafon/e.calculate().angsTotal,"1.0-2")," Bulan) "),r(8),p("Rp ",u(132,70,e.calculate().angsTotal,"1.0"),""),r(3),p("(",u(135,73,e.calculate().totalBunga/e.calculate().getPlafon/e.calculate().totalTenor*100,"1.2-2"),"% Bunga per Bulan)"),r(7),p("Rp ",u(142,76,e.calculate().angsTotal/30,"1.0"),""),r(7),p("Rp ",u(149,79,e.calculate().totalAngsuran,"0.0"),""),r(3),p("(",u(152,82,e.calculate().totalAngsuran/e.calculate().getPlafon*100,"0.00"),"% Pokok+Bunga)"),r(7),p("Rp ",u(159,85,e.calculate().totalBunga,"1.0"),""),r(4),p("(",u(163,88,e.calculate().totalBunga/e.calculate().getPlafon*100,"1.2-2"),"% Total)"),r(3),p("(",u(166,91,e.calculate().totalBunga/e.calculate().getPlafon/e.calculate().totalTenor*12*100,"1.2-2"),"% per Tahun)"),r(5),D(170,e.selected.id>0?170:-1))},dependencies:[V,X,J,Y,$,z,U,H,j,L,G,q]});let g=v;return g})();export{ce as CalculatorKreditComponent};
