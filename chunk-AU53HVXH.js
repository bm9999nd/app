import{h as L,i as q,j as U,k as Y,o as A}from"./chunk-MK3DI5XO.js";import{$a as C,Aa as a,Ga as p,La as m,Ma as r,Na as y,Oa as g,Pa as h,Qa as v,Ra as S,T as z,Va as b,Wa as d,Y as w,Z as I,_a as E,ab as P,bb as k,gb as V,hb as X,ib as T,jb as B,kb as D,la as M,lb as J,na as j,qb as O,sa as s,ta as N}from"./chunk-HOPZXBV5.js";import"./chunk-6HHDAJ7S.js";function K(e,l){e&1&&v(0)}var Q=e=>({block:e});function W(e,l){if(e&1&&(g(0),p(1,K,1,0,"ng-container",16),h()),e&2){let o=l.$implicit;d();let t=E(18);s(),a("ngTemplateOutlet",t)("ngTemplateOutletContext",T(2,Q,o))}}var Z=e=>({active:e});function tt(e,l){if(e&1){let o=S();m(0,"button",17),b("click",function(){let n=w(o).$implicit,c=d();return I(c.editItem.item.css.fontSize=n.css)}),C(1),r()}if(e&2){let o=l.$implicit,t=d();a("ngClass",T(2,Z,o.css==(t.editItem.item==null||t.editItem.item.css==null?null:t.editItem.item.css.fontSize))),s(),k(" ",o.name," ")}}function et(e,l){e&1&&v(0)}var nt=(e,l)=>({block:e,item:l});function it(e,l){if(e&1&&(g(0),p(1,et,1,0,"ng-container",16),h()),e&2){let o=l.$implicit,t=d().block;d();let i=E(20);s(),a("ngTemplateOutlet",i)("ngTemplateOutletContext",B(2,nt,t,o))}}var ot=(e,l,o,t)=>({"w-50":e,"w-100":l,"h-50":o,"h-100":t});function lt(e,l){if(e&1&&(m(0,"div",18),p(1,it,2,5,"ng-container",0),r()),e&2){let o=l.block;a("ngClass",D(2,ot,o.css.width=="half",o.css.width=="full",o.css.height=="half",o.css.height=="full")),s(),a("ngForOf",o.content)}}function ct(e,l){if(e&1&&(g(0),m(1,"a",22),C(2),r(),h()),e&2){let o=d(2).item;s(),a("href",o.link==null?null:o.link.url,M),s(),k(" ",o.text," ")}}function st(e,l){if(e&1&&(g(0),m(1,"div"),C(2),r(),h()),e&2){let o=d(2).item;s(2),P(o.text)}}function at(e,l){if(e&1&&(g(0),p(1,ct,3,2,"ng-container",21)(2,st,3,1,"ng-container",21),h()),e&2){let o=d().item;s(),a("ngIf",(o.link==null?null:o.link.url)!=null),s(),a("ngIf",(o.link==null?null:o.link.url)==null)}}var rt=(e,l,o,t,i,n,c,_,u)=>["d-grid",e,l,o,t,i,n,c,_,u],mt=()=>["text","title","heading"];function dt(e,l){if(e&1){let o=S();m(0,"div",19),b("click",function(i){let n=w(o),c=n.block,_=n.item,u=d();return I(u.editor(i,c,_))}),m(1,"div",20),p(2,at,3,2,"ng-container",21),r()()}if(e&2){let o=l.block,t=l.item;s(),a("classList",J(2,rt,[t.css.fontSize,t.css.width=="half"?"w-50":"",t.css.width=="full"?"w-100":"",t.css.height=="half"?"h-50":"",t.css.height=="full"?"h-100":"",t.css.align=="middle"?"align-items-center":"",t.css.align=="bottom"?"align-items-bottom":"",t.css.justify=="center"?"justify-content-center":"",t.css.justify=="right"?"justify-content-end":""]).join(" ")),s(),a("ngIf",X(12,mt).includes(o.type))}}var gt=(()=>{let l=class l{constructor(t){this.elRef=t,this.data=[],this.editItem={block:null,item:null},this.blockType=[{key:"break",icon:""},{key:"heading",icon:""},{key:"title",icon:""},{key:"text",icon:""},{key:"list",icon:""}],this.fontSize=[{name:"X-1",css:"display-1",icon:""},{name:"X-2",css:"display-2",icon:""},{name:"X-3",css:"display-3",icon:""},{name:"X-4",css:"display-4",icon:""},{name:"X-5",css:"display-5",icon:""},{name:"X-6",css:"display-6",icon:""},{name:"x-1",css:"fw-normal h1",icon:""},{name:"x-2",css:"fw-normal h2",icon:""},{name:"x-3",css:"fw-normal h3",icon:""},{name:"x-4",css:"fw-normal h4",icon:""},{name:"x-5",css:"fw-normal h5",icon:""},{name:"x-6",css:"fw-normal h6",icon:""},{name:"Normal",css:null,icon:""},{name:"Small",css:"small",icon:""}],this.styles={align:[{key:"top",icon:""},{key:"middle",icon:""},{key:"bottom",icon:""}],justify:[{key:"left",icon:""},{key:"center",icon:""},{key:"right",icon:""}],size:[{key:"full",css:"",icon:""},{key:"half",css:"",icon:""}]},this.dummy()}dummy(){let t=this.newBlock();t.type="text",t.css.height="full";let i=this.newContent(t);i.css.justify="center",i.css.align="middle",i.css.fontSize="display-1",i.text="Tester heading",t.content.push(i),this.data.push(t)}maxId(t){let i=0,n=t?.map(c=>Number(c.id));return n!=null&&n.length>0&&(i=Math.max(...n)),i}moveItem(t,i,n){let c=t.findIndex(x=>x.id==n),_=JSON.parse(JSON.stringify(t)),u=_.slice(0,c+1),f=_.slice(c+1),R=f.findIndex(x=>x.id==i),G=f[R];f.splice(R,1),u.push(G);let F=u.concat(f);return F.forEach((x,H)=>{x.sort=H+1}),F}getPropItem(t,i,n){return t.find(c=>c[n]==i)}newBlock(){let t=this.maxId(this.data);return{id:t+1,sort:t+1,type:null,css:{height:null,width:null},content:[]}}newContent(t){let i=this.maxId(t.content);return{id:i+1,sort:i+1,css:{align:null,justify:null,height:null,width:null,fontSize:null},img:{url:null,caption:null},link:{url:null,caption:null},text:null,props:{add:!1}}}insertContent(t,i){let n=this.newContent(t);n.text="New Item "+n.id,t.content?.push(n);let c=this.moveItem(t.content,n.id,i);t.content=c,this.editItem.block=null}editor(t,i,n){i==this.editItem.block?n==this.editItem.item?(this.editItem.block=null,this.editItem.item=null):this.editItem.item=n:(this.editItem.block=i,this.editItem.item=n),this.alignEditor(t)}alignEditor(t){let i=t.target,n=this.elRef.nativeElement.querySelector(".prop"),c=$(i),u=c.offset().top,f=$(window).height()-u-c.height();$(n).css("bottom",f+"px")}};l.\u0275fac=function(i){return new(i||l)(N(j))},l.\u0275cmp=z({type:l,selectors:[["app-raw"]],standalone:!0,features:[V],decls:21,vars:4,consts:[[4,"ngFor","ngForOf"],[1,"prop",3,"hidden"],[1,"prop-add"],["type","button",1,"btn","btn-lg","btn-primary","btn-circle",3,"click"],[1,"bi","bi-plus"],[1,"border-primary","border"],[1,"position-absolute","d-grid","justify-content-center","mt-3","w-100"],[1,"border","rounded"],[1,"d-flex"],[1,"d-grid"],["type","button",1,"btn","btn-light"],[1,"h-50","overflow-auto"],[1,"btn-group-vertical"],["type","button","class","btn btn-light",3,"ngClass","click",4,"ngFor","ngForOf"],["parent",""],["items",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",1,"btn","btn-light",3,"ngClass","click"],[3,"ngClass"],[3,"click"],[3,"classList"],[4,"ngIf"],[3,"href"]],template:function(i,n){if(i&1&&(p(0,W,2,4,"ng-container",0),m(1,"div",1)(2,"div",2)(3,"button",3),b("click",function(){return n.insertContent(n.editItem.block,n.editItem.item.id)}),y(4,"i",4),r(),y(5,"hr",5),r(),m(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"button",10),C(11),r(),m(12,"div",11)(13,"div",12),p(14,tt,2,4,"button",13),r()()()()(),y(15,"div",7),r()(),m(16,"div"),p(17,lt,2,7,"ng-template",null,14,O)(19,dt,3,13,"ng-template",null,15,O),r()),i&2){let c;a("ngForOf",n.data),s(),a("hidden",n.editItem.block==null),s(10),k(" ",(c=n.getPropItem(n.fontSize,n.editItem.item==null||n.editItem.item.css==null?null:n.editItem.item.css.fontSize,"css"))==null?null:c.name," "),s(3),a("ngForOf",n.fontSize)}},dependencies:[A,L,q,U,Y],styles:[".prop[_ngcontent-%COMP%]{width:100%;position:absolute}.prop-add[_ngcontent-%COMP%]{width:100%}.prop-add[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translateY(-50%);z-index:1}.prop-add[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:0}.btn-circle[_ngcontent-%COMP%]{--auto-sz: 30px;width:var(--auto-sz);height:var(--auto-sz);border-radius:50%;padding:0}"]});let e=l;return e})();export{gt as RawComponent};
